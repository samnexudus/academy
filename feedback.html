<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feedback</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
        }
        .feedback-buttons {
            margin: 20px 0;
        }
        .feedback-buttons button {
            padding: 10px 20px;
            font-size: 16px;
            margin: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <h1>Course Feedback</h1>
    <p>Please provide your feedback on the course.</p>

    <div class="feedback-buttons">
        <button id="good-btn" style="background-color: green; color: white;">Good</button>
        <button id="bad-btn" style="background-color: red; color: white;">Bad</button>
    </div>

    <p id="status-message"></p>

    <script>
        // Webhook URL to Airtable
        const webhookUrl = "https://hooks.airtable.com/workflows/v1/genericWebhook/appdInia1qyUjAidC/wfl7NhRg3j8GZ83cq/wtrqlYKwEyA9yu68K";  // Replace with your actual Airtable Webhook URL

        // Get the course name from the current URL or a static name
        const courseName = document.title;  // You can replace this with a static name or another dynamic source if needed

        // Handle feedback button clicks
        document.getElementById('good-btn').addEventListener('click', function() {
            sendFeedback('Good');
        });

        document.getElementById('bad-btn').addEventListener('click', function() {
            sendFeedback('Bad');
        });

        // Function to send feedback to Airtable webhook
        function sendFeedback(feedback) {
            const feedbackData = {
                fields: {
                    "Coursename": courseName,
                    "Feedback": feedback
                }
            };

            // Display status message while feedback is being sent
            document.getElementById('status-message').innerText = "Sending feedback...";

            fetch(webhookUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(feedbackData)
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById('status-message').innerText = "Feedback sent successfully!";
                console.log('Success:', data);
            })
            .catch(error => {
                document.getElementById('status-message').innerText = "Failed to send feedback.";
                console.error('Error:', error);
            });
        }
    </script>

</body>
</html>
